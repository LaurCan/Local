<!DOCTYPE html>
<html>

    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-5318292-3"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'UA-5318292-3');
        </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- JQuery-->
        <script src="/assets/externalJs/jquery-3.6.0.min.js"></script>
        <script src="/assets/externalJs/jquery-ui-1.12.1.min.js"></script>
  

        <!-- Semantic UI-->
        <link rel="stylesheet" type="text/css" href="/assets/externalJs/semantic-ui/semantic.min.css">
        <script src="/assets/externalJs/semantic-ui/semantic.min.js" type="text/javascript"></script>
        <script src="/assets/externalJs/semantic-ui/components/state.min.js"></script>
        <title>Questions Flash MathALÉA</title>
    </head>

    <body>
        <div class="ui input">
            <input type="text" value="3P10" id="input1">
        </div>
        <div class="ui input">
            <input type="text" value="3G40" id="input2">
        </div>
        <div class="ui input">
            <input type="text" value="3S15" id="input3">
        </div>
        <button class="ui button" onclick="AffQuestions();">Afficher les questions</button>
        <button class="ui button" onclick="AffReponses()">Afficher les réponses</button> 
        <style>
            .gridWrap {
              display: grid;
              grid-template-columns: 50% 50%;
              width: 100%;
            }
        </style>
             
        <div class="gridWrap">
            <div class="gridCol"><div class="Question1recto"></div><div class="Question2recto"></div><div class="Question3recto"></div></div>
            <div class="gridCol"><div class="Question1verso"></div><div class="Question2verso"></div><div class="Question3verso"></div></div>
        </div>

        <script>
            var graine = Math.random().toString(16).substr(2, 4);
            var url ="/exercice.html?ex=µ,n=1,i=0&serie=" + graine;
            //Ajuste la hauteur de la question (recto) ou de la réponse (verso)
            function setHeight(rectoOuVerso, numeroQuestion){
                let frameRecto = document.getElementById("rectoFrame" + numeroQuestion);
                let frameVerso = document.getElementById("versoFrame" + numeroQuestion);
                let hauteurRecto = "200px";
                let hauteurVerso = "200px";
                if (rectoOuVerso === "recto"){
                    frameRecto.onload = function() {
                        hauteurRecto = frameRecto.contentWindow.document.body.scrollHeight;
                        frameRecto.style.height = hauteurRecto + 'px';
                    }
                } else if (rectoOuVerso === "verso"){
                    frameVerso.onload = function() {
                        hauteurVerso = frameVerso.contentWindow.document.body.scrollHeight;
                        frameRecto.style.height = hauteurVerso + 'px';
                        frameVerso.style.height = hauteurVerso + 'px';
                    }
                }
            }
            //insère l'iframe de la question (recto) ou de la réponse (verso)
            function Aff(rectoOuVerso, numeroQuestion){
                let urlModifie = url.replace("µ",document.getElementById("input"+numeroQuestion).value);
                let idFrame = rectoOuVerso + "Frame" + numeroQuestion;
                let fields = document.querySelectorAll(".Question"+numeroQuestion+rectoOuVerso);
                fields.forEach(function(item){
                    item.innerHTML = "<iframe scrolling=\"no\" id=\"" + idFrame + "\" width=\"100%\" frameborder=\"0\" src=\"" + urlModifie + "&v=" + rectoOuVerso + "\"></iframe>";
                });
                setHeight(rectoOuVerso, numeroQuestion);
            }
            //affiche les questions
            function AffQuestions(){
            graine = Math.random().toString(16).substr(2, 4);
            url ="/exercice.html?ex=µ,nbQuestions=1&serie=" + graine;
                Aff("recto","1");
                Aff("recto","2");
                Aff("recto","3");
            }
            //affiche les réponses
            function AffReponses(){
                Aff("verso","1");
                Aff("verso","2");
                Aff("verso","3");
            }
        </script>
    </body>
</html>